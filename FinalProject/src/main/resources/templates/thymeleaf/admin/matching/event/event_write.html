<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layout/admin/matching/default">
<head>
<title>Admin</title>
<!-- 페이지 css -->
<th:block layout:fragment="css">
	<style></style>
</th:block>

<!-- 페이지 js -->
<th:block layout:fragment="js">
	<script src="https://ssl.daumcdn.net/dmaps/map_js_init/postcode.v2.js"></script>
	<script>
		function openZipSearch() {
            new daum.Postcode({
               oncomplete: function(data) {
            	   var fullAddr = data.address; // 최종 주소 변수
                   var extraAddr = ''; // 조합형 주소 변수
    
                   // 기본 주소가 도로명 타입일때 조합한다.
                   if(data.addressType === 'R'){
                       //법정동명이 있을 경우 추가한다.
                       if(data.bname !== ''){
                           extraAddr += data.bname;
                       }
                       // 건물명이 있을 경우 추가한다.
                       if(data.buildingName !== ''){
                           extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                       }
                       // 조합형주소의 유무에 따라 양쪽에 괄호를 추가하여 최종 주소를 만든다.
                       fullAddr += (extraAddr !== '' ? ' ('+ extraAddr +')' : '');
            	   
                  $('[name=eveLoc]').val(fullAddr);
                  $('[name=zip]').val(data.zonecode); // 우편번호 (5자리)
                  $('[name=addr1]').val(data.address);
                  $('[name=addr2]').val(data.buildingName);
               }
               }
            }).open();
         }
	
	$(function(){
		  $("#btn").click(function(){

		    //부모창의 id가 id인 input 태그에 'dragon' 이라는 문자열 저장하기
		  
					window.open("/admin/matching/member/List", "width=300,height=200,left=550,top=200");
				});

		    self.close();
		  });
		
	
	</script>
</th:block>
</head>

<body>
	<th:block layout:fragment="content" class="content">
		<!-- Page Heading -->
		<h1 class="h3 mb-4 text-gray-800">이벤트 등록</h1>
		<div class="row">
			<div class="col-md-12">
				<div class="card">
					<div class="card-body">
						<!-- Page 컨텐츠 영역 -->
						<form th:action="eventWritePro" method="post" name="frm" th:object="${eventCommand}" enctype="multipart/form-data">
							<div class="form-group row">
	        					<label for="eveSubject" class="col-sm-2 col-form-label">
	        						이벤트 제목
	        					</label>
	        					<div class="col-sm-10">
	        						<input type="text" name="eveSubject" class="form-control" id="eveSubject" th:field="*{eveSubject}"/>
	        						<span th:if="${#fields.hasErrors('eveSubject')}" th:errors="*{eveSubject}"></span>
	        					</div>
	        				</div>
	        				
	        				<div class="form-group row">
	        					<label for="eveContent" class="col-sm-2 col-form-label">
	        						이벤트 내용
	        					</label>
	        					<div class="col-sm-10">
	        						<textarea maxlength="1000"  rows="10" name="eveContent" class="form-control" id="eveContent" th:field="*{eveContent}"></textarea>
	        						<span th:if="${#fields.hasErrors('eveContent')}" th:errors="*{eveContent}"></span>
	        					</div>
	        				</div>
	        				
	        					<div class="form-group row">
	        					<label for="eveDate" class="col-sm-2 col-form-label">
	        						이벤트 일시
	        					</label>
	        					<div class="col-sm-10">
	        						<input type="date" name="eveDate" class="form-control" id="eveDate" th:field="*{eveDate}" >
	        						<span th:if="${#fields.hasErrors('eveDate')}" th:errors="*{eveDate}"></span>
	        					</div>
	        				</div>
	        				
	        				<div class="form-group row">
	        					<label for="eveLoc" class="col-sm-2 col-form-label">
	        						이벤트 장소
	        					</label>
	        					<div class="col-sm-10">
	        						<div class="form-row">
		        						<div class="col-10">
		        							<input type="text" name="eveLoc" class="form-control" id="eveLoc" th:field="*{eveLoc}" >
		        							<span th:if="${#fields.hasErrors('eveLoc')}" th:errors="*{eveLoc}"></span>
		        						</div>
		        						<div class="col-2">
		           							<input type="button" class="btn btn-primary" onclick='openZipSearch();' value="검색"/>     
		           						</div>
	           						</div>
	           					</div>
	        				</div>
	        				
	        				<div class="form-group row">
	        					<label for="eveMxCnt" class="col-sm-2 col-form-label">
	        						모집 인원
	        					</label>
	        					<div class="col-sm-10">
	        						<input type="text" name="eveMxCnt" class="form-control" id="eveMxCnt" th:field="*{eveMxCnt}"/>
	        						<span th:if="${#fields.hasErrors('eveMxCnt')}" th:errors="*{eveMxCnt}"></span>
	        					</div>
	        				</div>
	        				
	        				<div class="form-group row">
	        					<label for="eveImage" class="col-sm-2 col-form-label">
	        						소개 이미지
	        					</label>
	        					<div class="col-sm-10">
	        						<input type="file" class="form-control" name="eveImage" multiple="multiple"  th:field="*{eveImage}"/>
	        						<span th:if="${#fields.hasErrors('eveImage')}" th:errors="*{eveImage}"></span>
	        					</div>
	        				</div>

							<div class="btn-group float-sm-right">
								<button type="submit" class="btn btn-primary">등록</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</th:block>
</body>
</html>
